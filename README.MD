# Azure SQL Samples Search with AI

** WORK IN PROGRESS **

This sample demonstrates how to use Azure SQL to store and search data with AI. The sample uses RAG pattern, implementend with Azure SQL, to search for the most relevant code and end-to-end samples based on the user query. The results are then generated by AI to provide the most relevant documents to the user, with also a description of why the results are relevant.

The live websites is available here: https://ai.awesome.azuresql.dev/

## Architecture

The architecture of the sample is as follows:

[![Architecture](./_assets/ai-samples-search-azure-sql.png)](./_assets_/ai-samples-search-azure-sql.png)

1. **Azure SQL database** stores the samples data and the related embeddings. 
    - The **embeddings** are generated when a sample is added or updated to the database, using and embedding model hosted in Azure OpenAI. 
    - The **RAG pattern** is fully implemented in the database, using GPT-4o model to generate the results with a well-defined **structured** format, so tht results can be easily joined back with the samples data.

2. **Data API builder** is used to exposed stored procedure for searching and adding samples to the database. The API is used by the web application to interact with the database.

3. **React** front-end application is used to search for samples and display the results. 

## Azure Services

The whole architecture is built using the following Azure services:

- [Azure SQL Database](): to store and query the samples data and embeddings.
- [Azure Static Web Apps](): to host the full-stack application, including the front-end and the [backend API]().
- [Azure OpenAI](): to generate the embeddings for the samples data and to generate the results using the RAG pattern.

## Running the sample

### Local development

WIP

### Azure deployment

WIP